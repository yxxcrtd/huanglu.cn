<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="robots" content="all" />
        <meta name="keywords" content="黄麓、黄麓镇、书香黄麓、黄麓家园、黄麓网站" />
        <meta name="description" content="黄麓、黄麓镇、书香黄麓、黄麓家园、黄麓网站" />
        <title>书香黄麓</title>
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.fancybox.3.5.7.css" />
        <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!-- 页面自适应 -->
    </head>

    <body>
        <header id="header">
            <nav>
                <div id="logo"></div>
                <ul>
                    <li><a href="/">首页</a></li>
                    <li><a href="history.html">黄麓历史</a></li>
                    <li><a href="landscape.html">黄麓风景</a></li>
                    <li><a href="about.html" class="current">关于作者</a></li>
                </ul>
            </nav>
        </header>

        <article>
            <div id="articleDetail">
                <h2>ElasticSearch 基础</h2>
                <p class="title">一，Linux centOS 7 / RedHat 7 下安装 Elasticsearch</p>
<p>1，下载：https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.8.4.tar.gz</p>
<p>2，解压：tar -xvf elasticsearch-6.8.4.tar</p>
<p>3，进入：cd elasticsearch-6.8.4</p>
<p>4，修改配置文件：vim config/elasticsearch.yml</p>
<div class="code">
    <p>打开 cluster.name，并修改后面的值：cluster.name: myskywalking</p>
    <p>修改IP让其他机器可以访问：network.host: 0.0.0.0</p>
    <p>添加配置项：bootstrap.memory_lock: false</p>
    <p>添加配置项：bootstrap.system_call_filter: false</p>
    <p>9200 端口默认不用修改</p>
</div>
<p> 5，Elasticsearch 为了安全起见不能使用 root 启动</p>
<div class="code">
    <p>1，添加用户：groupadd elsearch</p>
    <p>2，设置密码：useradd elsearch -g elsearch -p 123456</p>
    <p>3，更改 Elasticsearch 的所属用户及组：sudo chown -R elsearch:elsearch /home/elasticsearch-6.8.4/bin/elasticsearch</p>
    <p>4，启动：su elsearch</p>
    <p>5，启动：sh /home/elasticsearch-6.8.4/bin/elasticsearch -d</p>
    <p>6，验证：curl localhost:9200或浏览器打开：http://192.168.90.82:9200</p>
</div>
<br />


<p class="title">二，Mac 下安装 Elasticsearch</p>
<p>1，前提是安装 JDK8</p>
<p>2，brew install elastic/tap/elasticsearch-full</p>
<p>3，xcode-select --install</p>
<p>4，brew install gcc</p>
<p> 5，brew install elasticsearch</p>
<p> 6，临时启动：elasticsearch</p>
<p> 7，后台启动：brew services start elasticsearch</p>
<p> 8，访问：http://localhost:9200</p>
<p> 9，配置文件：vim /usr/local/etc/elasticsearch/elasticsearch.yml</p>
<div class="code">
    <p>1，修改：cluster.name: myskywalking</p>
    <p>2，修改：network.host: 127.0.0.1</p>
    <p>3，修改：http.port: 9200</p>
</div>
<br />


<p class="title">三，启动错误：max file description [4096] for elasticsearch process is too low, increase to at least [65536]</p>
<p>vim /etc/security/limits.conf, 在最下面添加两行：</p>
<p style="text-align: center;">
    <a href="images/article/article27.01.png" data-fancybox>
        <img src="images/article/article27.01.png" width="800" />
    </a>
</p>
<br />


<p class="title">四，启动错误：ERROR：bootstrap checks failed  … at your own risk</p>
<div class="code">
    <p>  修改：因为不支持SecComp，所以修改如上面：1.8 和 1.9</p>
</div>
                <h4>2020-11-12 05:38:00</h4>
            </div>
            <div id="articleAside">
                <div id="category"></div>
            </div>
        </article>

        <footer id="footer"></footer>

        <script src="js/jquery-3.5.1.js"></script>
        <script src="js/public.js"></script>
        <script src="js/jquery.fancybox.3.5.7.js"></script>
    </body>
</html>