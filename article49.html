<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="robots" content="all" />
        <meta name="keywords" content="黄麓、黄麓镇、书香黄麓、黄麓家园、黄麓网站" />
        <meta name="description" content="黄麓、黄麓镇、书香黄麓、黄麓家园、黄麓网站" />
        <title>书香黄麓</title>
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.fancybox.3.5.7.css" />
        <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" /><!-- 页面自适应 -->
    </head>

    <body>
        <header id="header">
            <nav>
                <div id="logo"></div>
                <ul>
                    <li><a href="/">首页</a></li>
                    <li><a href="history.html">黄麓历史</a></li>
                    <li><a href="landscape.html">黄麓风景</a></li>
                    <li><a href="about.html" class="current">关于作者</a></li>
                </ul>
            </nav>
        </header>

        <article>
            <div id="articleDetail">
                <h2>Mac 下 Docker 基础</h2>
                <p class="title">一，Mac 下启动 docker 工具的发展</p>
<p>1，最开始使用：boot2docker</p>
<p>2，再到：Docker Toolbox</p>
<p>3，目前最新： Docker Desktop for Mac</p>
<br />


<p class="title">二，Mac 上安装 Docker Desktop 的最新方法：</p>
<p>1，直接安装：brew cask install docker（也可以下载安装：https://hub.docker.com/editions/community/docker-ce-desktop-mac）</p>
<div class="code">
    <p>brew cask install docker</p>
</div>
<p>2，镜像加速（慢的时候修改）：Perferences... -> Daemon -> Registry mirrors -> + -> http://hub-mirror.c.163.com，使用：docker info 验证</p>
<p>3，<a href="https://hub.docker.com" target="https://hub.docker.com">https://hub.docker.com</a>（yxxcrtd/C1）</p>
<p>4，下载之后在应用中打开：Docker，顶部就有 Docker 图标，最好登录下，里面有教程等</p>
<p>5，终端测试：docker run -dp 80:80 docker/getting-started</p>
<p>6，浏览器测试：http://localhost，自动跳转到：http://localhost/tutorial</p>
<br />


登录 aliyun.com，搜素：容器镜像服务，提示：您还没有开通服务，请点击确定后设置Registry登录密码，点击：前往开通，设置Registry登录密码（C1），设置完了，进入：https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors，左侧：镜像加速器。。。

在任务栏点击 Docker Desktop 应用图标 -> Perferences，在左侧导航菜单选择 Docker Engine，在右侧输入栏编辑 json 文件。将

https://dxvyjtmi.mirror.aliyuncs.com加到"registry-mirrors"的数组里，点击 Apply & Restart按钮，等待Docker重启并应用配置的镜像加速器。
编辑的 json文件如下：（配置文件参考：https://docs.docker.com/engine/reference/commandline/dockerd/）
{
  "debug": true,
  "experimental": false,
  "registry-mirrors": ["https://dxvyjtmi.mirror.aliyuncs.com"]
}






<p class="title">三，Docker 基本操作</p>
<p>1，先要停止正在运行的容器：docker stop ‘容器id’</p>
<p>2，删除容器：docker rm 17c8d8b559a3</p>
<p>3，删除所有容器：docker rm `docker ps -a -q`</p>
<p>4，删除所有镜像：docker rmi `docker images -q`（可能删不干净的话，加上 -f）</p>
<p>5，进入容器：docker run -i -t postgres bash</p>
<br />


<p class="title">四，安装 MySQL</p>
<p>1，下载：docker pull mysql</p>
<p>2，运行：docker run --name mysql -p 13306:3306 -e MYSQL_ROOT_PASSWORD=root -d mysql</p>
<p>3，执行：docker exec -it mysql bash</p>
<p>4，登录：mysql -h 127.0.0.1 -u root -p</p>
<br />






使用 docker 启动容器出行：device or resource busy

1， 查看没有umount的路径：cat /proc/mounts | grep "mapper/docker" | awk '{print $2}'
2，依次unmount：umount /var/lib/docker/devicemapper/mnt/a1e1298d51e2b1fbf222d475e25bd5593eb53edeaac8b8093b91ac9251489208
3，service docker restart
4，docker start ‘容器ID’


Nginx
 pure 8.41

  nginx-1.12.1


'nginx: [emerg] could not build server_names_hash, you should increase server_names_hash_bucket_size: 32
在nginx的配置文件的http段中增加如下配置：server_names_hash_bucket_size 64;







Docker 运行 Jenkins

下载：docker pull jenkins

启动：docker run -d -t --name=jenkins -p 15436:8080 -v /tmp/jenkins/:/var/jenkins jenkins

找密码：docker inspect jenkins （找到类似：/var/lib/docker/volumes/ff60。。。。。。/_data）

密码：cat /var/lib/docker/volumes/ff60690。。。d67/_data/secrets/initialAdminPassword

运行：http://139.198.2.158:15436

插件：选择右边的手动选择安装插件

选择None，不安装插件，等进入系统后再安装；
                <h4>2020-09-23 13:56:59</h4>
            </div>
            <div id="articleAside">
                <div id="category"></div>
            </div>
        </article>

        <footer id="footer"></footer>

        <script src="js/jquery-3.5.1.js"></script>
        <script src="js/public.js"></script>
        <script src="js/jquery.fancybox.3.5.7.js"></script>
    </body>
</html>